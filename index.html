<!DOCTYPE html>
<html lang="lb">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>P3 Zuelen 20â€“99 â€“ 3 Spiller</title>
  <style>
    @font-face {
      font-family: 'SchoulschrÃ«ft';
      src: url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
      font-weight: bold;
      font-display: swap;
    }

    :root{
      --bg:#ffffff;
      --ink:#111111;
      --muted:#50555b;
      --accent:#2b7de9; /* P3 blue */
      --accent-ink:#0c3c91;
      --ring:#d7e6ff;
      --ok:#2e7d32;
      --bad:#c62828;
      --border:#000000;
      --tile:#ffffff;
      --tileHover:#f6f8fb;
    }

    *{ box-sizing:border-box }
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:'SchoulschrÃ«ft', system-ui, Arial, sans-serif;
      min-height:100svh; display:flex; align-items:center; justify-content:center; padding:16px;
    }

    .app{
      width:min(100%, 1080px);
      background:#fff; border:1px solid #eaeaea; border-radius:24px;
      box-shadow:0 10px 30px rgba(0,0,0,.08);
      padding:18px 18px 24px;
    }

    .topbar{ display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
    .badge{
      font-size:14px; padding:6px 12px; border-radius:999px; background:#f3f7fe;
      color:var(--accent-ink); border:1px solid var(--ring);
    }
    .btn{
      border:1px solid var(--ring); border-radius:12px; padding:10px 14px;
      background:#f3f7fe; color:var(--accent-ink); cursor:pointer; font-weight:700;
    }
    .btn:hover{ background:var(--tileHover); }

    /* Center navigation with arrows + 1./2./3. Spill */
    .nav-wrap{
      display:flex; align-items:center; justify-content:center; gap:12px; margin:12px 0 6px;
    }
    .nav-arrow{
      width:40px; height:40px; border:2px solid var(--border); border-radius:999px;
      display:flex; align-items:center; justify-content:center; background:#fff; cursor:pointer; user-select:none; font-weight:900;
    }
    .nav-arrow:hover{ background:var(--tileHover); }
    .nav{
      display:flex; justify-content:center; gap:10px;
    }
    .tab{
      border:2px solid var(--border); border-radius:999px; background:#fff;
      padding:8px 16px; cursor:pointer; user-select:none; font-weight:800;
    }
    .tab.active{ background:var(--accent); color:#fff; }

    .screen{ display:none; }
    .screen.active{ display:block; }

    .word{
      text-align:center; font-size: clamp(26px, 4.2vw, 44px); font-weight:700;
      margin:6px 0 12px; padding:12px 16px; border-radius:16px;
      background:linear-gradient(180deg,#fafcff,#f3f7fe); border:1px solid var(--ring); color:var(--accent-ink);
    }

    .row{ margin:16px 0 6px; }
    .label{ color:var(--muted); font-size:16px; margin:0 0 8px 6px; }

    .choices{ display:grid; gap:12px; }
    .choices.units{ grid-template-columns: repeat(10, minmax(52px, 1fr)); }
    .choices.tens{ grid-template-columns: repeat(9, minmax(68px, 1fr)); }

    .chip{
      position:relative; display:flex; align-items:center; justify-content:center;
      user-select:none; cursor:pointer; font-weight:800; color:var(--ink);
      border:2px solid var(--border); background:#fff; transition:transform .06s ease, background .15s ease, color .15s ease;
      font-family:'SchoulschrÃ«ft', system-ui, Arial, sans-serif;
    }
    .chip.circle{
      aspect-ratio:1/1; border-radius:999px; width:100%;
      min-width:48px; min-height:48px; font-size: clamp(18px, 2.8vw, 28px);
    }
    .chip.pill{
      border-radius:999px; padding:14px 10px; font-size: clamp(18px, 2.6vw, 26px);
    }
    .chip:hover{ background:var(--tileHover); transform:translateY(-1px); }
    .chip.correct{ background:var(--ok); color:#fff; }
    .chip.wrong{ background:var(--bad); color:#fff; animation:shake .18s linear 2; }
    @keyframes shake {
      0%{transform:translateX(0)} 25%{transform:translateX(-3px)} 50%{transform:translateX(3px)} 75%{transform:translateX(-2px)} 100%{transform:translateX(0)}
    }

    .footer{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:16px; flex-wrap:wrap; color:var(--muted); font-size:14px; }
    .progress{ height:10px; background:#eef3ff; border-radius:999px; overflow:hidden; margin-top:4px; border:1px solid var(--ring); }
    .progress > i{ display:block; height:100%; width:0%; background: linear-gradient(90deg, #86b7ff, var(--accent)); transition: width .35s ease; }

    .done{ text-align:center; padding:24px 12px 8px; }
    .done h2{ margin:0 0 10px; font-size: clamp(26px, 4vw, 38px); color:var(--accent-ink); }

    /* Game 2 circle */
    .big-circle{
      margin: 24px auto 0; width:min(60vmin, 420px); aspect-ratio:1/1; border-radius:999px;
      border: 3px solid var(--border); background:#fff; display:flex; align-items:center; justify-content:center;
      font-size: clamp(36px, 9vmin, 86px); font-weight:900; cursor:pointer; user-select:none;
      transition: transform .2s ease;
      font-family:'SchoulschrÃ«ft', system-ui, Arial, sans-serif;
    }
    .pop{ animation: pop .25s ease; }
    @keyframes pop{ 0%{transform: scale(.85)} 70%{transform: scale(1.06)} 100%{transform: scale(1)} }

    /* Game 3 (order the letters) */
    .type-wrap{ display:grid; grid-template-columns: 1fr 2fr; gap:18px; align-items:start; }
    .target{ display:flex; align-items:center; gap:18px; flex-wrap:wrap; }
    .letter-boxes{ display:flex; gap:8px; flex-wrap:wrap; min-height:58px; }
    .box{
      width:48px; height:56px; border:2px solid var(--border); background:#fff; border-radius:10px;
      display:flex; align-items:center; justify-content:center; font-size:28px; font-weight:900;
      font-family:'SchoulschrÃ«ft', system-ui, Arial, sans-serif;
      cursor:pointer;
    }
    .box.correct{ background:#e9f7ee; border-color:var(--ok); color:var(--ok); }
    .box.wrong{ background:#fdeaea; border-color:var(--bad); color:var(--bad); }

    .bank{ margin-top:10px; display:flex; flex-wrap:wrap; gap:8px; }
    .tile{
      border:2px solid var(--border); border-radius:10px; background:#fff; padding:10px 14px; min-width:38px;
      text-align:center; font-weight:900; cursor:pointer; user-select:none; font-size:22px;
      font-family:'SchoulschrÃ«ft', system-ui, Arial, sans-serif;
    }
    .tile:hover{ background:var(--tileHover); }
    .tile.disabled{ opacity:.35; pointer-events:none; }

    .mini-controls{ display:flex; gap:8px; margin-top:10px; }
    .mini-btn{ border:2px solid var(--border); border-radius:10px; background:#fff; padding:8px 12px; cursor:pointer; font-weight:800; }
    .mini-btn:hover{ background:var(--tileHover); }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="badge" id="countBadge">Beispill 1 / 25</div>
      <div style="display:flex; gap:8px;">
        <button class="btn" id="resetBtn">ZerÃ©cksetzen</button>
      </div>
    </div>

    <!-- Center navigation -->
    <div class="nav-wrap" role="tablist" aria-label="Spiller wielen">
      <div class="nav-arrow" id="prevArrow" title="Viregt">â€¹</div>
      <div class="nav">
        <div class="tab active" data-screen="game1" role="tab" aria-selected="true">1. Spill</div>
        <div class="tab" data-screen="game2" role="tab" aria-selected="false">2. Spill</div>
        <div class="tab" data-screen="game3" role="tab" aria-selected="false">3. Spill</div>
      </div>
      <div class="nav-arrow" id="nextArrow" title="NÃ¤chst">â€º</div>
    </div>

    <!-- GAME 1 -->
    <section id="game1" class="screen active" aria-label="Spill 1">
      <div class="word" id="word">â€”</div>

      <div class="row">
        <div class="label">UnitÃ©iten</div>
        <div class="choices units" id="units"></div>
      </div>

      <div class="row">
        <div class="label">ZÃ©ngere</div>
        <div class="choices tens" id="tens"></div>
      </div>

      <div class="footer">
        <div style="min-width:220px; flex:1;">
          <div class="progress" aria-hidden="true"><i id="bar"></i></div>
        </div>
        <div>Punkten: <b id="score">0</b></div>
      </div>

      <div id="endScreen" class="done" style="display:none;">
        <h2>Super gemaach! ðŸŽ‰</h2>
        <p>Du hues all 25 Beispiller gemaach.</p>
        <p>Punkten: <b id="finalScore">0</b> / 25</p>
        <button class="btn" id="againBtn">Nach eng KÃ©ier spillen</button>
      </div>
    </section>

    <!-- GAME 2 -->
    <section id="game2" class="screen" aria-label="Spill 2">
      <div class="word">Klick op de Krees fir dÃ©i nÃ¤chst Zuel</div>
      <div class="big-circle" id="sayCircle" title="Klick fir dÃ©i nÃ¤chst Zuel">â€”</div>
      <div class="footer">
        <div style="min-width:220px; flex:1;">
          <div class="progress"><i id="bar2"></i></div>
        </div>
        <div>Beispill: <b id="count2">0</b></div>
      </div>
    </section>

    <!-- GAME 3 (Order the letters) -->
    <section id="game3" class="screen" aria-label="Spill 3">
      <div class="type-wrap">
        <div class="target">
          <div class="big-circle" id="spellCircle" style="width:min(40vmin, 320px); font-size:clamp(32px,7.2vmin,68px);">â€”</div>
        </div>
        <div>
          <div class="letter-boxes" id="letterBoxes"></div>
          <div class="bank" id="letterBank"></div>
          <div class="mini-controls">
            <button class="mini-btn" id="undoBtn">ZrÃ©ck</button>
            <button class="mini-btn" id="clearBtn">Alles lÃ¤schen</button>
          </div>
          <div class="footer" style="margin-top:14px;">
            <div style="min-width:220px; flex:1;">
              <div class="progress"><i id="bar3"></i></div>
            </div>
            <div>Ronn: <b id="count3">0</b></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    // ---------- DATA ----------
    const NUMBER_WORDS = {
      20:"zwanzeg", 21:"eenanzwanzeg", 22:"zweeanzwanzeg", 23:"drÃ¤iandzwanzeg", 24:"vÃ©ieranzwanzeg", 25:"fÃ«nnefanzwanzeg", 26:"sechsanzwanzeg", 27:"siwenanzwanzeg", 28:"achtanzwanzeg", 29:"nÃ©nganzwanzeg",
      30:"drÃ«sseg", 31:"eenandrÃ«sseg", 32:"zweeandrÃ«sseg", 33:"drÃ¤iandrÃ«sseg", 34:"vÃ©ierandrÃ«sseg", 35:"fÃ«nnefandrÃ«sseg", 36:"sechsadrÃ«sseg", 37:"siwenadrÃ«sseg", 38:"achtadrÃ«sseg", 39:"nÃ©ngandrÃ«sseg",
      40:"vÃ©ierzeg", 41:"eenavÃ©ierzeg", 42:"zweeavÃ©ierzeg", 43:"drÃ¤iavÃ©ierzeg", 44:"vÃ©ieravÃ©ierzeg", 45:"fÃ«nnefavÃ©ierzeg", 46:"sechsavÃ©ierzeg", 47:"siwenavÃ©ierzeg", 48:"achtavÃ©ierzeg", 49:"nÃ©ngavÃ©ierzeg",
      50:"fofzeg", 51:"eenaffofzeg", 52:"zweeaffofzeg", 53:"drÃ¤iaffofzeg", 54:"vÃ©ieraffofzeg", 55:"fÃ«nneffofzeg", 56:"sechsaffofzeg", 57:"siwenaffofzeg", 58:"achtaffofzeg", 59:"nÃ©ngaffofzeg",
      60:"sechzeg", 61:"eenasechzeg", 62:"zweeasechzeg", 63:"drÃ¤iasechzeg", 64:"vÃ©ierasechzeg", 65:"fÃ«nnefasechzeg", 66:"sechsasechzeg", 67:"siwenasechzeg", 68:"achtasechzeg", 69:"nÃ©ngasechzeg",
      70:"siwwenzeg", 71:"eenasiwwenzeg", 72:"zweeasiwwenzeg", 73:"drÃ¤iasiwwenzeg", 74:"vÃ©ierasiwwenzeg", 75:"fÃ«nnefasiwwenzeg", 76:"sechsasiwwenzeg", 77:"siwenasiwwenzeg", 78:"achtasiwwenzeg", 79:"nÃ©ngasiwwenzeg",
      80:"achtzeg", 81:"eenenachtzeg", 82:"zweeanachtzeg", 83:"drÃ¤ianachtzeg", 84:"vÃ©ieranachtzeg", 85:"fÃ«nnefanachtzeg", 86:"sechsanachtzeg", 87:"siwenanachtzeg", 88:"achtanachtzeg", 89:"nÃ©nganachtzeg",
      90:"nonzeg", 91:"eenanonzeg", 92:"zweeanonzeg", 93:"drÃ¤ianonzeg", 94:"vÃ©ieranonzeg", 95:"fÃ«nnefanonzeg", 96:"sechsanonzeg", 97:"siwenanonzeg", 98:"achtanonzeg", 99:"nÃ©nganonzeg",
      100:"honnert"
    };

    const EXAMPLES = [
      { word: "nÃ©ngasiechzeg", unit: 9, tens: 60 },
      { word: "drÃ¤iandrÃ«sseg", unit: 3, tens: 30 },
      { word: "vÃ©ieravÃ©ierzeg", unit: 4, tens: 40 },
      { word: "fÃ«nneffofzeg", unit: 5, tens: 50 },
      { word: "siwenasiwwenzeg", unit: 7, tens: 70 },
      { word: "achtanachtzeg", unit: 8, tens: 80 },
      { word: "eenanzwanzeg", unit: 1, tens: 20 },
      { word: "zweeanzwanzeg", unit: 2, tens: 20 },
      { word: "sechsasechzeg", unit: 6, tens: 60 },
      { word: "nÃ©nganonzeg", unit: 9, tens: 90 },
      { word: "zwanzeg", unit: 0, tens: 20 },
      { word: "drÃ¤ianachtzeg", unit: 3, tens: 80 },
      { word: "vÃ©ieranonzeg", unit: 4, tens: 90 },
      { word: "fÃ«nnefasiwwenzeg", unit: 5, tens: 70 },
      { word: "sechsadrÃ«sseg", unit: 6, tens: 30 },
      { word: "siwenavÃ©ierzeg", unit: 7, tens: 40 },
      { word: "achtanzwanzeg", unit: 8, tens: 20 },
      { word: "zweeanonzeg", unit: 2, tens: 90 },
      { word: "eenasechzeg", unit: 1, tens: 60 },
      { word: "vÃ©ieranfofzeg", unit: 4, tens: 50 },
      { word: "drÃ¤iasiwwenzeg", unit: 3, tens: 70 },
      { word: "sechsanonzeg", unit: 6, tens: 90 },
      { word: "achtavÃ©ierzeg", unit: 8, tens: 40 },
      { word: "siwenanzwanzeg", unit: 7, tens: 20 },
      { word: "fÃ«nnefanachtzeg", unit: 5, tens: 80 },
    ];
    const TOTAL = 25;

    // ---------- NAV ----------
    const tabs = document.querySelectorAll('.tab');
    const screens = document.querySelectorAll('.screen');
    const prevArrow = document.getElementById('prevArrow');
    const nextArrow = document.getElementById('nextArrow');

    function activate(screenId){
      tabs.forEach(t=>t.classList.remove('active'));
      screens.forEach(s=>s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
      document.querySelector(`.tab[data-screen="${screenId}"]`).classList.add('active');
    }
    tabs.forEach(tab=> tab.addEventListener('click', ()=> activate(tab.dataset.screen)));

    function currentIndex(){
      const ids = ['game1','game2','game3'];
      const active = Array.from(screens).findIndex(s=>s.classList.contains('active'));
      return active === -1 ? 0 : active;
    }
    prevArrow.addEventListener('click', ()=>{
      const ids = ['game1','game2','game3'];
      const i = currentIndex();
      const ni = (i + 3 - 1) % 3;
      activate(ids[ni]);
    });
    nextArrow.addEventListener('click', ()=>{
      const ids = ['game1','game2','game3'];
      const i = currentIndex();
      const ni = (i + 1) % 3;
      activate(ids[ni]);
    });

    // ---------- HELPERS ----------
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }
    function stripSpacesHyphens(s){ return s.replace(/[\s\-]/g,''); }
    function nfc(s){ return s.normalize('NFC'); }

    // ---------- GAME 1 ----------
    const wordEl   = document.getElementById('word');
    const unitsEl  = document.getElementById('units');
    const tensEl   = document.getElementById('tens');
    const barEl    = document.getElementById('bar');
    const scoreEl  = document.getElementById('score');
    const countBadge = document.getElementById('countBadge');
    const endScreen  = document.getElementById('endScreen');
    const finalScore = document.getElementById('finalScore');
    const resetBtn   = document.getElementById('resetBtn');
    const againBtn   = document.getElementById('againBtn');

    let deck = [], idx = 0, score = 0;
    let lockedUnit = false, lockedTens = false;

    function makeDeck(){ const pool=[...EXAMPLES]; shuffle(pool); return pool.slice(0,TOTAL); }

    function renderNumberRows(){
      unitsEl.innerHTML = '';
      for(let u=0; u<=9; u++){
        const btn = document.createElement('button');
        btn.className = 'chip circle';
        btn.textContent = String(u);
        btn.dataset.unit = u;
        btn.addEventListener('click', onUnitClick);
        unitsEl.appendChild(btn);
      }
      tensEl.innerHTML = '';
      for(let t=10; t<=90; t+=10){
        const btn = document.createElement('button');
        btn.className = 'chip pill';
        btn.textContent = String(t);
        btn.dataset.tens = t;
        btn.addEventListener('click', onTensClick);
        tensEl.appendChild(btn);
      }
    }

    function updateHUD(){
      countBadge.textContent = `Beispill ${Math.min(idx+1, TOTAL)} / ${TOTAL}`;
      scoreEl.textContent = String(score);
      barEl.style.width = Math.round((idx / TOTAL) * 100) + '%';
    }

    function showCard(){
      lockedUnit = lockedTens = false;
      [...unitsEl.children].forEach(el=>el.className='chip circle');
      [...tensEl.children].forEach(el=>el.className='chip pill');
      const card = deck[idx];
      wordEl.textContent = card.word;
      updateHUD();
    }

    function flash(el, cls){ el.classList.add(cls); setTimeout(()=>el.classList.remove(cls), 250); }

    function onUnitClick(e){
      if (idx >= TOTAL || lockedUnit) return;
      const el = e.currentTarget;
      const choice = Number(el.dataset.unit);
      const correct = deck[idx].unit;
      if (choice === correct){ el.classList.add('correct'); lockedUnit = true; maybeAdvance(); }
      else { flash(el,'wrong'); }
    }
    function onTensClick(e){
      if (idx >= TOTAL || lockedTens) return;
      const el = e.currentTarget;
      const choice = Number(el.dataset.tens);
      const correct = deck[idx].tens;
      if (choice === correct){ el.classList.add('correct'); lockedTens = true; maybeAdvance(); }
      else { flash(el,'wrong'); }
    }
    function maybeAdvance(){
      if (lockedUnit && lockedTens){
        score += 1;
        updateHUD();
        setTimeout(()=>{
          idx += 1;
          if (idx >= TOTAL) finish(); else showCard();
        }, 420);
      }
    }
    function finish(){
      wordEl.textContent = "â€”";
      endScreen.style.display = "block";
      finalScore.textContent = String(score);
      barEl.style.width = '100%';
      countBadge.textContent = `FÃ¤erdeg / ${TOTAL}`;
    }
    function resetGame1(){
      endScreen.style.display = "none";
      score = 0; idx = 0; deck = makeDeck();
      showCard();
    }

    // ---------- GAME 2 ----------
    const sayCircle = document.getElementById('sayCircle');
    const bar2 = document.getElementById('bar2');
    const count2 = document.getElementById('count2');
    let list2 = [], i2 = 0;

    function makeList2(){
      const nums = [];
      for(let n=20;n<=100;n++) nums.push(n);
      return shuffle(nums).slice(0,30);
    }
    function show2(){
      sayCircle.textContent = list2[i2] ?? 'â€”';
      sayCircle.classList.remove('pop'); void sayCircle.offsetWidth; sayCircle.classList.add('pop');
      bar2.style.width = Math.round((i2 / list2.length) * 100) + '%';
      count2.textContent = String(i2);
    }
    function next2(){
      i2++;
      if (i2 >= list2.length){ i2 = 0; list2 = makeList2(); }
      show2();
    }
    function resetGame2(){ list2 = makeList2(); i2 = 0; show2(); }
    sayCircle.addEventListener('click', next2);

    // ---------- GAME 3 (Order letters) ----------
    const spellCircle = document.getElementById('spellCircle');
    const letterBoxes = document.getElementById('letterBoxes');
    const letterBank = document.getElementById('letterBank');
    const bar3 = document.getElementById('bar3');
    const count3 = document.getElementById('count3');
    const undoBtn = document.getElementById('undoBtn');
    const clearBtn = document.getElementById('clearBtn');

    let list3 = [], i3 = 0, targetWord = '', targetLetters = [], filled = []; // filled holds chosen letters indices

    function makeList3(){
      const pool = [];
      for (let n=20;n<=100;n++){
        if (NUMBER_WORDS[n]) pool.push(n);
      }
      return shuffle(pool).slice(0,20);
    }

    function newRound3(){
      filled = [];
      const num = list3[i3];
      spellCircle.textContent = String(num);

      // Strip spaces/hyphens from target for letter ordering
      const raw = NUMBER_WORDS[num] || '';
      targetWord = nfc(stripSpacesHyphens(raw));
      targetLetters = [...targetWord];

      // Build slots
      letterBoxes.innerHTML = '';
      targetLetters.forEach((_)=>{
        const b = document.createElement('div');
        b.className = 'box';
        b.textContent = '';
        b.addEventListener('click', ()=> removeLast());
        letterBoxes.appendChild(b);
      });

      // Build bank with exactly needed letters (including duplicates), shuffled
      letterBank.innerHTML = '';
      const bankLetters = shuffle([...targetLetters]);
      bankLetters.forEach((ch, idx)=>{
        const t = document.createElement('div');
        t.className = 'tile';
        t.textContent = ch;
        t.dataset.index = idx; // bank index
        t.addEventListener('click', ()=> pickTile(t));
        letterBank.appendChild(t);
      });

      updateBars3();
    }

    function updateBars3(){
      bar3.style.width = Math.round((i3 / list3.length) * 100) + '%';
      count3.textContent = String(i3);
    }

    function pickTile(tile){
      // find first empty slot
      const boxes = [...letterBoxes.children];
      const emptyIndex = boxes.findIndex(b=> b.textContent === '');
      if (emptyIndex === -1) return;

      boxes[emptyIndex].textContent = tile.textContent;
      tile.classList.add('disabled');
      filled.push(tile); // remember tile for undo

      // check if full
      if (boxes.every(b=> b.textContent !== '')){
        checkWord3();
      }
    }

    function removeLast(){
      if (filled.length === 0) return;
      const boxes = [...letterBoxes.children];
      // find last filled slot
      let lastFilled = boxes.length - 1;
      while (lastFilled >= 0 && boxes[lastFilled].textContent === '') lastFilled--;
      if (lastFilled < 0) return;

      boxes[lastFilled].textContent = '';
      const lastTile = filled.pop();
      lastTile.classList.remove('disabled');
    }

    function clearAll(){
      const boxes = [...letterBoxes.children];
      boxes.forEach(b=> b.textContent = '');
      // re-enable all tiles
      const tiles = [...letterBank.children];
      tiles.forEach(t=> t.classList.remove('disabled'));
      filled = [];
    }

    function markBoxes(cls){
      const boxes = [...letterBoxes.children];
      boxes.forEach(b=> b.classList.add(cls));
      setTimeout(()=> boxes.forEach(b=> b.classList.remove(cls)), 450);
    }

    function checkWord3(){
      const guess = nfc([...letterBoxes.children].map(b=>b.textContent).join(''));
      if (guess === targetWord){
        markBoxes('correct');
        setTimeout(()=>{
          i3++;
          if (i3 >= list3.length){ list3 = makeList3(); i3 = 0; }
          newRound3();
        }, 500);
      } else {
        markBoxes('wrong');
        setTimeout(clearAll, 450);
      }
    }

    undoBtn.addEventListener('click', removeLast);
    clearBtn.addEventListener('click', clearAll);

    function resetGame3(){ list3 = makeList3(); i3 = 0; newRound3(); }

    // ---------- GLOBAL CONTROLS ----------
    resetBtn.addEventListener('click', ()=>{ resetGame1(); resetGame2(); resetGame3(); });
    againBtn?.addEventListener('click', resetGame1);

    // Init all
    renderNumberRows();
    resetGame1();
    resetGame2();
    resetGame3();
  </script>
</body>
</html>



